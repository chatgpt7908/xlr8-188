server {
    listen       80;
    server_name  localhost;

    # Proxy block with valid upstream host, bad port
    location / {
        proxy_pass             http://wp-app-broken:9999;
        proxy_set_header       Host              $host;
        proxy_set_header       X-Real-IP         $remote_addr;
        proxy_intercept_errors on;                 # catch 502/504
        error_page 502 504 = /index.html;          # fallback
    }

    # Serve your static fallback
    location = /index.html {
        internal;
        root /usr/share/nginx/html;
    }
}

